(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t():"function"===typeof define&&define.amd?define([],t):"object"===typeof exports?exports["wpd"]=t():e["wpd"]=t()})("undefined"!==typeof self?self:this,(function(){return function(e){var t={};function l(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,l),a.l=!0,a.exports}return l.m=e,l.c=t,l.d=function(e,t,i){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(l.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)l.d(i,a,function(t){return e[t]}.bind(null,a));return i},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="",l(l.s="fb15")}({"1d6c":function(e,t,l){"use strict";l("e07d")},"21f8":function(e,t,l){"use strict";l("6915")},6915:function(e,t,l){},8875:function(e,t,l){var i,a,n;(function(l,r){a=[],i=r,n="function"===typeof i?i.apply(t,a):i,void 0===n||(e.exports=n)})("undefined"!==typeof self&&self,(function(){function e(){var t=Object.getOwnPropertyDescriptor(document,"currentScript");if(!t&&"currentScript"in document&&document.currentScript)return document.currentScript;if(t&&t.get!==e&&document.currentScript)return document.currentScript;try{throw new Error}catch(f){var l,i,a,n=/.*at [^(]*\((.*):(.+):(.+)\)$/gi,r=/@([^@]*):(\d+):(\d+)\s*$/gi,o=n.exec(f.stack)||r.exec(f.stack),s=o&&o[1]||!1,c=o&&o[2]||!1,d=document.location.href.replace(document.location.hash,""),u=document.getElementsByTagName("script");s===d&&(l=document.documentElement.outerHTML,i=new RegExp("(?:[^\\n]+?\\n){0,"+(c-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),a=l.replace(i,"$1").trim());for(var h=0;h<u.length;h++){if("interactive"===u[h].readyState)return u[h];if(u[h].src===s)return u[h];if(s===d&&u[h].innerHTML&&u[h].innerHTML.trim()===a)return u[h]}return null}}return e}))},e07d:function(e,t,l){},fb15:function(e,t,l){"use strict";if(l.r(t),l.d(t,"directives",(function(){return J})),"undefined"!==typeof window){var i=window.document.currentScript,a=l("8875");i=a(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:a});var n=i&&i.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);n&&(l.p=n[1])}var r=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[l("h1",[e._v("我是一个组件")]),l("h1",[e._v(e._s(e.message))]),l("button",{on:{click:function(t){return e.clicked()}}},[e._v("点一下会如何")])])},o=[],s={props:{message:{type:String,default:"xxx"}},name:"toast2",data(){return{}},methods:{clicked(){this.$emit("clicked","点了一下")}}},c=s;function d(e,t,l,i,a,n,r,o){var s,c="function"===typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=l,c._compiled=!0),i&&(c.functional=!0),n&&(c._scopeId="data-v-"+n),r?(s=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),a&&a.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(r)},c._ssrRegister=s):a&&(s=o?function(){a.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:a),s)if(c.functional){c._injectStyles=s;var d=c.render;c.render=function(e,t){return s.call(t),d(e,t)}}else{var u=c.beforeCreate;c.beforeCreate=u?[].concat(u,s):[s]}return{exports:e,options:c}}var u=d(c,r,o,!1,null,null,null),h=u.exports,f=function(){var e=this,t=e.$createElement,l=e._self._c||t;return e.data.tableData?l("div",[l("v-chart",{staticStyle:{width:"100%"},attrs:{theme:"ovilia-green",options:e.options}}),l("v-table",{staticStyle:{width:"100%"},attrs:{"row-hover-color":"#eee","row-click-color":"#edf7ff",height:200,"column-width-drag":"",columns:e.tableColumns,"table-data":e.tableData,"cell-edit-done":e.cellEditDone,"is-horizontal-resize":"","is-vertical-resize":!0}})],1):e._e()},p=[];const m=function(e,t){let l=[],i=[],a=[],n={title:t[1].title,key:t[1].field},r=[];if(t)for(let o=2;o<t.length;o++)r.push({title:t[o].title,key:t[o].field}),a.push(t[o].title);if(e)for(let o=0;o<e.length;o++)if(l.push(e[o][n.key]),0==o)for(let t=0;t<r.length;t++)i.push({name:r[t].title,type:"line",data:[e[o][r[t].key]]});else for(let t=0;t<r.length;t++)i[t].data.push(e[o][r[t].key]);return{xAxisData:l,seriesData:i,legendData:a}};var g={tableData2Charts:m},b={name:"ChartTable",props:{editable:{type:Boolean,default:!1},data:{type:Object,required:!0}},data(){return{options:{}}},computed:{tableData:{get(){return this.data.tableData}},tableColumns:{get(){return this.editable||this.data.tableColumns.forEach(e=>{e.isEdit=!1}),this.data.tableColumns}}},watch:{tableData:{handler(e){e&&this.updateCharts()},deep:!0,immediate:!0}},mounted(){console.log("--",this.data)},methods:{cellEditDone(e,t,l,i,a){this.$emit("cellEditDone",{rowIndex:l,field:a,newValue:e,oldValue:t,rowData:i})},updateCharts(){let e=g.tableData2Charts(this.tableData,this.tableColumns);this.options={tooltip:{show:!0,trigger:"axis"},legend:{data:e.legendData},xAxis:{type:"category",data:e.xAxisData,max:e=>e.max,min:e=>e.min},yAxis:{type:"value",max:e=>e.max,min:e=>e.min},series:e.seriesData}}}},y=b,v=(l("1d6c"),d(y,f,p,!1,null,"f3fa6bfc",null)),w=v.exports,D=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[l("a-tabs",{attrs:{"default-active-key":"1","tab-position":"left"},on:{change:e.callback}},e._l(e.chartTableDatas,(function(t){return l("a-tab-pane",{key:t.key,attrs:{tab:t.title}},[l("chart-table",{staticStyle:{width:"90%"},attrs:{data:e.updateDataType(t.key)}})],1)})),1)],1)},k=[],T={name:"CharacteristicCurve",props:{currentKey:{type:String,required:!0}},data(){return{currentDataType:"",chartTableDatas:[]}},mounted(){},watch:{currentKey:{handler:"updateCurrentKey",immediate:!0}},methods:{callback(e){console.log(e)},updateCurrentKey(e){this.chartTableDatas=[],this.$emit("getCurves",e,e=>{if(e)for(let t=0;t<e.length;t++)this.chartTableDatas.push({tableData:e[t].tableData,tableColumns:e[t].tableColumns,key:e[t].id,title:e[t].name})})},updateDataType(e){if(this.chartTableDatas)for(let t=0;t<this.chartTableDatas.length;t++)if(this.chartTableDatas[t].key==e)return this.chartTableDatas[t]}}},C=T,x=d(C,D,k,!1,null,"7ac9acb9",null),S=x.exports,_=function(){var e=this,t=e.$createElement,l=e._self._c||t;return e.treeData&&e.tableColumns&&e.tableData?l("div",{staticStyle:{display:"flex"}},[l("div",{staticClass:"treeDev"},[l("a-tree",{attrs:{checkable:"","tree-data":e.treeData,defaultCheckedKeys:[e.treeData[0].key],defaultExpandedKeys:e.expandedTreeNodes},on:{check:e.onCheck}})],1),l("div",{staticClass:"tableDev",staticStyle:{"flex-grow":"1"}},[l("v-table",{staticStyle:{"text-align":"center",width:"95%"},attrs:{"row-hover-color":"#eee",height:650,"column-width-drag":"",columns:e.tableColumns,"table-data":e.showTableData,"is-horizontal-resize":"","row-click":e.rowClick,"is-loading":0==e.showTableData.length},on:{"on-custom-comp":e.customChange}})],1)]):e._e()},E=[];const A=function(e,t){if(e&&e.length>0)for(let l=0;l<e.length;l++)t(e[l]),e[l].children&&A(e[l].children,t)},R=function(e,t){if(e&&e.length>0)for(let l=0;l<e.length;l++)e[l].children?R(e[l].children,t):t(e[l])},$=function(e,t){if(e&&e.length>0)for(let l=0;l<e.length;l++)e[l].children&&(t(e[l]),$(e[l].children,t))},O=function(e,t){if(e&&e.length>0)for(let l=0;l<e.length;l++)t.push(e[l]),e[l].children&&O(e[l].children,t)},j=function(e,t){if(e&&e.length>0)for(let l=0;l<e.length;l++){if(t(e[l]))return e[l];if(e[l].children)return j(e[l].children,t)}},z=function(e){let t=[],l=Object.keys(e).filter(e=>-1!=e.indexOf("flow"));l.sort();for(let a=0;a<l.length;a++)t.push(e[l[a]].selectedId);let i={nodeName:e.nodeName,flows:t,nodeId:e.nodeId};return i},N=function(e){let t={...e};t.key=t.nodeId;let l=t.flows;delete t.flows;for(let i=0;i<l.length;i++){let e=[];for(let t=0;t<l[i].flowModels.length;t++)e.push({id:l[i].flowModels[t].modelId,name:l[i].flowModels[t].modelName,modelParamId:l[i].flowModels[t].modelParamId});let a={key:l[i].flowId,title:l[i].flowName,order:l[i].order,selectedId:e[0].id,options:e};t["flow"+(i+1)]=a}return t},I=function(e,t){if(e&&e.length>0){for(let l=0;l<e.length;l++)if(t(e[l]))return e[l];return e[0]}},K=function(e){let t=[],l=[{field:"id",title:"序号",width:80,titleAlign:"center",columnAlign:"center",isResize:!0},{field:"title",title:"约束项",width:180,titleAlign:"center",columnAlign:"center",isResize:!0}],i=e.value;if(i&&i.length>0&&(i.forEach(e=>{l.push({field:e.key,title:e.title,width:180,titleAlign:"center",columnAlign:"center",isResize:!0,isEdit:!0})}),i[0].value.single))for(let a=0;a<i[0].value.single.length;a++){let e={id:a+1,key:i[0].value.single[a].key,title:i[0].value.single[a].title,showType:i[0].value.single[a].showType};for(let t=0;t<i.length;t++)e[i[t].key]=i[t].value.single[a].value;t.push(e)}return{key:e.key,tableColumns:l,tableData:t}},L=function(e){let t=[],l=[],i=[{field:"id",title:"序号",width:80,titleAlign:"center",columnAlign:"center",isResize:!0},{field:"time",title:"时间",width:80,titleAlign:"center",columnAlign:"center",isResize:!0}],a=e.value;if(a&&a.length>0&&(a.forEach(e=>{i.push({field:e.key,title:e.title,width:80,titleAlign:"center",columnAlign:"center",isResize:!0,isEdit:!0})}),t=a[0].value.timeList,a[0].value.process))for(let n=0;n<a[0].value.process.length;n++){let e=[];for(let l=0;l<t.length;l++){let i={id:l+1,time:t[l]};for(let e=0;e<a.length;e++)i[a[e].key]=a[e].value.process[n].value[l];e.push(i)}l.push({key:a[0].value.process[n].key,title:a[0].value.process[n].title,value:e})}return{key:e.key,tableColumns:i,tableDatas:l}},M=function(e){let t=[],l=[],i=[{field:"id",title:"序号",width:80,titleAlign:"center",columnAlign:"center",isResize:!0},{field:"time",title:"时间",width:80,titleAlign:"center",columnAlign:"center",isResize:!0}],a=e.value;if(a&&a.length>0&&(a[0].value.process.forEach(e=>{i.push({field:e.key,title:e.title,showType:e.showType,width:80,titleAlign:"center",columnAlign:"center",isResize:!0,isEdit:!0})}),t=a[0].value.timeList,a[0].value.process))for(let n=0;n<a.length;n++){let e=[];for(let l=0;l<t.length;l++){let i={id:l+1,time:t[l]};for(let e=0;e<a[n].value.process.length;e++)i[a[n].value.process[e].key]=a[n].value.process[e].value[l];e.push(i)}l.push({key:a[n].key,title:a[n].title,value:e})}return{key:e.key,tableColumns:i,tableDatas:l}},P=function(e,t){if(e&&e.length>0)for(let l=0;l<e.length;l++)t(e[l])},H=function(e){let t=[],l=["id","time"],i=[{field:l[0],title:"序号",width:80,titleAlign:"center",columnAlign:"center",isResize:!0},{field:l[1],title:"时间",width:80,titleAlign:"center",columnAlign:"center",isResize:!0}];for(let a=0;a<e.field.length;a++)-1==l.indexOf(e.field[a])&&i.push({field:e.field[a],title:e.title[0][e.field[a]],width:80,titleAlign:"center",columnAlign:"center",isResize:!0});for(let a=0;a<e.data.length;a++)t.push({...e.data[a],id:a+1});return{tableColumns:i,tableData:t}};var V={treeStatistic:A,treeStatisticLeaf:R,treeStatisticNLeaf:$,treeElement:O,treeStatisticFindFirst:j,tableData2Rest:z,rest2TableData:N,arrayFindfirst:I,singleRest2table:K,processRest2table:L,processRest2tableScheme:M,arrayForeach:P,publishScheme2table:H},B={name:"TreeTable",props:{datas:{type:Object,required:!0}},data(){return{checkedKeys:[],showTableData:[],tableColumns:[]}},mounted(){},computed:{treeTableData:{get(){return this.datas}},tableData:{get(){return this.treeTableData.tableData}},treeData:{get(){return this.treeTableData.treeData}},expandedTreeNodes:{get(){let e=[];return V.treeStatisticNLeaf(this.treeData,t=>e.push(t.key)),e}}},watch:{checkedKeys:{handler(e){this.$emit("updateCheckedKeys",e);let t=[];this.tableData&&this.tableData.length>0&&(this.tableData.forEach(l=>{e.indexOf(l.key)>-1&&t.push(l)}),this.setShowTableData(t))}},treeData:{handler(e){let t=e=>{e.selected=!0};V.treeStatisticLeaf(e,t),this.$emit("updateTreeData",this.treeTableData.treeData);let l=[],i=e=>{e.selected&&l.push(e.key)};V.treeStatisticLeaf(e,i),this.checkedKeys=l}},tableData:{handler(e){for(let l=0;l<e.length;l++)e[l]=V.rest2TableData(e[l]);this.$emit("updateTableData",e),this.setShowTableData(e);let t=this.createTreeTableColumns(e);t.forEach(e=>{e.isResize=!0,"flow"==e.field.slice(0,4)&&(e.componentName="TableSelect")}),this.tableColumns=t}}},methods:{onCheck(e){if(e){let t=[],l=l=>{-1!=e.indexOf(l.key)&&t.push(l.key)};V.treeStatisticLeaf(this.treeData,l),this.checkedKeys=t}},customChange(e){let t=[];this.$emit("getTableData",e=>t=e);for(let l=0;l<t.length;l++)t[l].key==e.rowData.key&&(t[l]=e.rowData);this.$emit("updateTableData",t)},createTreeTableColumns(e){let t=1,l=[{title:"节点编码",field:"nodeId",width:150},{title:"名称",field:"nodeName",width:150},{title:"节点类型",field:"nodeTypeName",width:150}];e.forEach(e=>{let l=Object.keys(e),i=[];l.forEach(e=>{"flow"==e.slice(0,4)&&i.push(e)}),t<i.length&&(t=i.length)});for(let i=0;i<t;i++)l.push({title:"流程"+(i+1),field:"flow"+(i+1),width:150});return this.setHeaderByRow(l,e[0]),l},setHeaderByRow(e,t){for(let l=0;l<e.length;l++)t[e[l].field]?t[e[l].field].title&&(e[l].title=t[e[l].field].title):e[l].title=""},rowClick(e,t,l){console.log(e,t,l),this.setHeaderByRow(this.tableColumns,t)},setShowTableData(e){this.showTableData=e}}},F=B,q=(l("21f8"),d(F,_,E,!1,null,"f5f4bd4e",null)),U=q.exports,X={bind:()=>{console.log("directive bind")},inserted:(e,t)=>{console.log("el:",e,t)}};const G=[h,w,S,U],J={testDirective:X},Q=function(e){G.map(t=>e.component(t.name,t)),Reflect.ownKeys(J).map(t=>e.directive(t,J[t]))};"undefined"!==typeof window&&window.Vue&&Q(window.Vue);var W={install:Q,toast2:h,ChartTable:w,CharacteristicCurve:S,TreeTable:U,...J};t["default"]=W}})}));
//# sourceMappingURL=wpd.umd.min.js.map